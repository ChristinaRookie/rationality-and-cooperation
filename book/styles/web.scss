---
# Web styles
---

// What is this?
// -------------
// This is typography for the Electric Book Elements theme (see http://electricbook.works).
// It is built with Sass. (See http://sass-lang.com, and http://jekyllrb.com/docs/assets for how Jekyll implements Sass.)
// It sets defaults that can be overridden in each book's own stylesheets, where the variables here are duplicated.
// 
// How to use it
// -------------
// Edit the default variables below.
// Comment/uncomment or add font imports below.
// Add your own custom CSS at the bottom.

// First, let's set character encoding. Don't change this.
@charset "utf-8";

// -------------
// Set variables
// -------------

// Edition suffix: identifies this edition in certain classes (e.g. in _epub-fitting.scss).
$edition-suffix: null;

// Max width of main body area
$max-width-default: 40em;

// We name font variables for two categories:
// - 'text' fonts are used for body text and some page features;
// - 'display' fonts are used for headings and similar short-string features.
// For each category, we set a main font and a secondary font, allowing up to four fonts.
// Finally, we set a fifth, monospace font for elements like computer code.
$font-text-main: "Crimson", serif;
$font-text-secondary: "Source Sans Pro", sans-serif;
$font-display-main: "Source Sans Pro", sans-serif;
$font-display-secondary: "Crimson", serif;
$font-code: "Ubuntu Mono", monospace;

// Set font size and line-height in ems or px.
// These values, especially $line-height-default, are used to compute vertical rhythm
// for many features in this theme. So do not use a unitless value for line-height,
// and don't use percentages, which will break layouts computed by multiplying this value.
$font-size-default: 1.2em;
$line-height-default: 1.5em;
$font-size-smaller: 0.7; // How much smaller than font-size-default for features like sidenotes and footers?
$font-size-bigger: 2; // How many times bigger than font-size-default for features like headings and pullquotes?

// Do you want space between paragraphs, rather than a text-indent? true or false
$spaced-paras: true;

// Buttons
$button-border-radius: 0.1em; // Roundness of button corners.

// Rules, lines
$rule-thickness: 1px;

// Colours
$color-text-main: #222222;
$color-text-secondary: #222222;
$color-background: white;
$color-light: #e0e0e0;
$color-mid: #9c9c9c;
$color-accent: #000000;
$color-links: #5f738c;
$color-buttons: $color-accent;
$color-buttons-hover: darken( $color-buttons, 20% );
$color-highlight: #ffd54d;

// Some features rearrange at certain screen sizes.
// What are your break points for rearrangement?
$break-point-height: 60em;
$break-point-width: 60em;

// Set the default start-depth of pages.
// This is the distance from the top of the page to the first element on the first page.
$start-depth: $line-height-default * 2;

// Hyphenation
// Variables here apply to p, ul, ol, dl.
// Note: Most browsers and ereaders do not support hyphenation rules.
$hyphenation: manual; // Can be auto, none, or manual (only breaks on hyphens and soft hyphens)
$hyphenation-dictionary: ""; // Path to dictionary file, relative to `/book/styles`. E.g. "../../assets/hyph.dic".
$hyphenation-custom: add; // add or replace. Whether your dictionary adds to or replaces the built-in Prince dictionaries
$hyphenate-after: 3; // Minimum letters on new line after hyphen
$hyphenate-before: 3; // Minimum letters at end of line before hyphen
$hyphenate-lines: 1; // Maximum number of consecutive lines ending with hyphens

// Text dividers
// For breaks created with *** in markdown.
$text-divider: ""; // Empty leaves space. \2022 is a bullet

// Footer
$footer-text-color: $color-text-main;
$footer-background-color: $color-accent;
$footer-border-color: $color-accent;

// Website masthead
$masthead-text-color: $color-light;
$masthead-background-color: $color-accent;
$masthead-border-color: $color-light;

// Website sidebar/navigation
$nav-bar-text-size: 0.8em;
$nav-bar-item-collapse: false; // Does the nav list fully expand, or collapse until mouseover?
$nav-bar-close: "\00D7"; // &times; Ã—
$nav-bar-children-prompt: "+";
$nav-bar-children-prompt-hide: "\2212"; // \2212 is an actual minus sign
$nav-bar-scrollbar: true;
$nav-bar-width: 15em;
$nav-bar-fixed: true;
$nav-bar-label-color: $color-light;
$nav-bar-label-background-color: $masthead-background-color;
$nav-bar-label-border-color: transparent !default;
$nav-bar-border-color: $color-light;
$nav-bar-background-color: white;
$nav-bar-search-background-color: white;
$nav-bar-parent-background-color: white;
$nav-bar-parent-text-color: black;
$nav-bar-parent-hover-color: $color-accent;
$nav-bar-parent-text-hover-color: white;
$nav-bar-children-prompt-color: $color-mid;
$nav-bar-child-background-color: $color-light;
$nav-bar-child-text-color: black;
$nav-bar-child-hover-color: $color-accent;
$nav-bar-child-text-hover-color: white;

// Language selector
$language-select-icon-color: $color-light;
$language-select-text-color: $color-text-secondary;
$language-select-links-color: $color-links;
$language-select-background-color: $color-background;

// ---------------------------------
// Set to false to turn partials off
// ---------------------------------

// Reset browser CSS as best we can
$web-css-reset: true;

// Structural HTML components
$web-wrappers: true;

// Default typography
$web-base-typography: true;

// Navigation
$web-masthead: true;
$web-search: true;
$web-nav-bar: true;
$web-footer: true;
$web-language-select: true;
$web-accordion: true;

// Book parts
$web-cover: true;
$web-previous-publications-page: true;
$web-title-pages: true;
$web-copyright-page: true;
$web-dedications: true;
$web-epigraphs: true;
$web-toc: true;

// Book-feature classes
$web-bibliographies: true;
$web-boxes: true;
$web-buttons: true;
$web-code: true;
$web-dialogue: true;
$web-figures: true;
$web-highlighter: true;
$web-glossaries: true;
$web-index: true;
$web-maths: true;
$web-notes: true;
$web-openers: true;
$web-pullquotes: true;
$web-sources: true;
$web-tables: true;
$web-letters: true;
$web-verse: true;
$web-video: true;
$web-pagination: true;
$web-multiple-choice-questions: true;

// Type-control classes
$web-smallcaps: true;
$web-fitting: true;  // E.g. tracking and shrinking

// Logic (if this then that)
$web-reset-sequences: true; // This should stay last in the @import list

// ------------
// Import fonts
// ------------

// Add @font-face rules for fonts you specify here.
// Add the actual font files to `../fonts`
// For snippets, try https://github.com/arthurattwell/font-faces

// -------------
// Master theme
// -------------

// Import master styles
@import 'web';

// -------------
// Custom styles
// -------------

// Add any custom Sass or CSS here.

// mixin for "outside margins" on very large screens

$outside-width: ($break-point-width - $max-width-default) / 2 - $line-height-default * 6;
$outside-margin: ($break-point-width - $max-width-default) / 2 - $line-height-default * 4;

@mixin outside-right() {
	@media (min-width: $break-point-width) {
		float: right;
		clear: right;
		margin-top: 0;
		margin-right: -$outside-margin;
		margin-bottom: $line-height-default;
		margin-left: 0;
		max-width: $outside-width;
		&.web-wide {
			max-width: $outside-width * 2;
			margin-right: -($outside-width - 1em);
			margin-left: 1em;
		}
		&.web-full-width {
			float: none;
			max-width: 100%;
			margin-left: 0;
			margin-right: 0;
		}
	}
}

@mixin outside-left() {
	@media (min-width: $break-point-width) {
		float: left;
		clear: left;
		margin-top: 0;
		margin-right: 0;
		margin-bottom: $line-height-default;
		margin-left: -$outside-margin;
		max-width: $outside-width;
		&.web-wide {
			max-width: $outside-width * 2;
			margin-left: -($outside-margin - 1em);
			margin-right: 1em;
		}
		&.web-full-width {
			float: none;
			max-width: 100%;
			margin-left: 0;
			margin-right: 0;
		}
	}
}

// definition lists

.definition {
    padding: ($line-height-default / 2);
    background: $color-accent;
    color: white;
    border-bottom-right-radius: $button-border-radius;
    font-family: $font-text-secondary;
    font-size: $font-size-default * $font-size-smaller;
    line-height: ($line-height-default * $font-size-smaller) * 1.4; // 1.4 retains good proportion of font height to line height
    // on larger screens, text wraps around definitions
    @media (min-width: $break-point-width) {
        float: right;
        clear: right;
        position: relative;
        min-width: 5em;
        max-width: 40%;
        margin: 0 0 ($line-height-default / 2) 2em;
    }
    // on very large screens, place definitions in the margin
    @include outside-right();
}

.js-definitions {
    .definition {
        background-color: $color-background;
        color: $color-accent;
        border: 0.2em solid $color-accent;
    }
}

[data-term] {
    color: $color-links;
    cursor: pointer;
}

.definition-term {
    font-weight: bold;
    display: inline-block;
    margin-right: 0.25em;
}

.definition-description {
    display: inline;
    margin-bottom: 0;
    // Create a line break after each definition in a multiple-definitions box
    &:after {
        content: "";
        display: block;
    }
    &.no-definition {
        background: $color-highlight;
    }
}

.definition-example {
    // Put a line break before the example
    &:before {
        content: "";
        display: block;
        margin-top: 0.5em;
    }
}

.definitions {
    display: none;
}

.definition-description-hover {
    // pull definition-description-hover out of the doc flow so they hover above text
    z-index: 1;
    position: absolute;
    // look and feel
    margin-top: $line-height-default;
    max-width: $max-width-default * 0.8;
    margin-left: auto;
    margin-right: auto;
    left: $max-width-default * 0.25 / 3;
    right: $max-width-default * 0.25 / 3;
    background-color: $color-background;
    font-family: $font-text-secondary;
    font-size: $font-size-default * $font-size-smaller;
    font-weight: normal;
    color: $color-text-main;
    border: 0.2em solid $color-accent;
    border-bottom-right-radius: $button-border-radius / 2;
    padding: ($line-height-default / 2);
    box-shadow: 1px 2px 7px grey;
    // when these are attached to an italic term,
    // they must not inherit that font style
    font-style: initial;
    p {
        margin-bottom: 0;
    }
    // Make wider when in a sidenote
    .sidenote & {
        left: 0;
        right: 0;
    }
}

.definition-hover-term {
    font-weight: bold;
}

// This mixin used for close button here
// and on footnotes close button below
@mixin number-marker() {
    vertical-align: inherit;
    display: inline-block;
    min-width: 1em;
    background: $color-accent;
    border-radius: 1em;
    padding: 0 0.1em 0.1em 0.1em;
    text-align: center;
    font-weight: bold;
    font-family: $font-text-secondary;
}

.definition-description-hover {
    .close {
        position: absolute;
        right: -($line-height-default / 2);
        top: -($line-height-default / 2);
        line-height: 1;
        @include number-marker();
        padding: 0.15em 0.1em 0em 0.1em; // override number-marker padding
        color: white;
        border: 0;
        font-size: 1em;
        // vertical-align: inherit;
        // display: inline-block;
        // min-width: 1em;
        // background: $color-accent;
        // border-radius: 1em;
        // padding: 0.1em;
        // text-align: center;
        // font-weight: bold;
        // font-family: $font-text-secondary;
        // border: 0;
        // cursor: pointer;
        &:before {
            content: $nav-bar-close;
            display: inline-block;
            width: 1em;
            position: relative;
            top: -0.1em;
        }
    }
}

.hidden-definition-list {
    display: none;
}


// Target a class with a dot, an element with its name, and a span (with a data-term) like:

// The square brackets select an attribute


[data-definition] {
	color: $color-links;
}

// CSS imagining there was an element in the DOM immediately after the data-term element. 
// The ':after' pseudo element adds an element after the data-term

[data-definition]:after {
	content: attr(data-definition);
	display: block;
	position: absolute;
	background-color: #ffffff;
	border: solid;
    padding-top: 0.2em;
    padding-bottom: 0.2em;
    padding-left: 0.6em;
    padding-right: 0.6em;
    max-width: $max-width-default * 0.6;
    margin-left: auto;
    margin-right: auto;
    left: $max-width-default * 0.25 / 3;
    right: $max-width-default * 0.25 / 3;
    // this hides the definition box temporarily
    display: none;
    font-weight: normal;
}

// hover is a pseudo class
[data-definition]:hover {
	font-weight: bold;
}

[data-definition]:hover:after {
	display: block;
}





